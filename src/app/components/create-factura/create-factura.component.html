<form #myForm="ngForm" (keydown.enter)="$event.preventDefault()" (ngSubmit)="enviar(datosXML)">
    <!------------------------------->
    <!--------Datos del emisor------->
    <!------------------------------->
    <div class="header-title" aria-label="Sección de datos de emisor de factura" aria-describedby="pendiente">
        <div class="divider">
            <h5>Datos del emisor</h5>
        </div>
    </div>
    <div class="container card p-3">
        <div class="form-group mb-0">
            <p class="pl-3">Actividad Economica:</p>
            <div class="row pl-3 form-item">
                <div class="col-md-4" *ngFor="let actividad of actividades; let i = index">
                    <div class="custom-control custom-radio d-inline-block px-4">
                        <input class="pl-3 custom-control-input" type="radio" [attr.id]="'actividad' + i"
                            name="actividad" [(ngModel)]="codigoActividad" [value]="actividad.codigo"
                            aria-label="Checkbox para actividad económica" aria-describedby="pendiente">
                        <label class="custom-control-label" [attr.for]="'actividad' + i">{{actividad.descripcion |
                            capitals}}</label>
                    </div>
                </div>
            </div>
            <div class="form-item col-md-8">
                <label for="lblNombreRazonSocialEmisor">Nombre o Razon Social</label>

                <div class="input-group">
                    <input type="text" class="form-control" id="txtNombreRazonSocialEmisorId"
                        name="nombreRazonSocialEmisor" [(ngModel)]="datosXML.emisor_nombre"
                        aria-label="Nombre de razon social con boton para mostrar información"
                        aria-describedby="pendiente" [attr.disabled]="emisorDeshabilitado ? true:null" required />
                    <div class="input-group-append">
                        <button type="button" class="btn btn-outline-secondary" (click)="toggle()"
                            aria-label="Botón ver datos del emisor" aria-describedby="pendiente">
                            VER DATOS
                        </button>
                    </div>
                </div>
            </div>

            <div>
                <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsedEmisorData">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="form-item col-md-4">
                                    <label for="NombreComercialEmisor">Nombre Comercial</label>
                                    <input type="text" class="form-control" id="NombreComercialEmisor"
                                        name="nombreComercialEmisor" #nombreComercialEmisor="ngModel"
                                        [attr.disabled]="emisorDeshabilitado ? true:null"
                                        [(ngModel)]="datosXML.nombre_comercial" aria-label="Nombre Comercial del emisor"
                                        aria-describedby="pendiente" required />

                                </div>
                                <div class="form-item col-md-4">
                                    <label for="IdentificacionEmisor">Identificación</label>
                                    <input type="number" class="form-control" id="IdentificacionEmisor"
                                        name="identificacionEmisor" #identificacionEmisor="ngModel"
                                        [attr.disabled]="true" [(ngModel)]="datosXML.emisor_num_identif"
                                        aria-label="Identificación del emisor" aria-describedby="pendiente" required />
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-item col-md-4">
                                    <label for="CorreoEmisor">Correo electrónico</label>
                                    <input type="text" class="form-control" id="CorreoEmisor" name="correoEmisor"
                                        #correoEmisor="ngModel" [attr.disabled]="emisorDeshabilitado ? true:null"
                                        [(ngModel)]="datosXML.emisor_email" aria-label="Correo electrónico del emisor"
                                        aria-describedby="pendiente" required
                                        pattern="[\w-\.]+@([\w-]+\.)+[\w-]{2,4}" />
                                    <span class="text-danger" *ngIf="correoEmisor.touched && !correoEmisor.valid">
                                        <span>Dato inválido.</span>
                                    </span>
                                </div>
                                <div class="form-item col-md-4">
                                    <label for="TelefonoEmisor">Teléfono</label>
                                    <input type="text" class="form-control" id="TelefonoEmisor" name="telefonoEmisor"
                                        #telefonoEmisor="ngModel" [attr.disabled]="emisorDeshabilitado ? true:null"
                                        [(ngModel)]="datosXML.emisor_tel" aria-label="Teléfono del emisor"
                                        aria-describedby="pendiente" required pattern="[0-9]{8}" />
                                    <span class="text-danger" *ngIf="telefonoEmisor.touched && !telefonoEmisor.valid">
                                        <span>Dato inválido.</span>
                                    </span>
                                </div>
                                <div class="form-item col-md-4">
                                    <label for="FaxEmisor">Fax</label>
                                    <input type="text" class="form-control" id="FaxEmisor" name="faxEmisor"
                                        #faxEmisor="ngModel" [attr.disabled]="emisorDeshabilitado ? true:null"
                                        [(ngModel)]="datosXML.emisor_fax" aria-label="Fax del emisor"
                                        aria-describedby="pendiente" required pattern="[0-9]{8}" />
                                    <span class="text-danger" *ngIf="faxEmisor.touched && !faxEmisor.valid">
                                        <span>Dato inválido.</span>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-item col-md-4">
                                    <label for="ProvinciaEmisor">Provincia</label>
                                    <select ng-init="datosXML.emisor_provincia" class="form-control"
                                        id="ProvinciaEmisor" name="provinciaEmisor" #provinciaEmisor="ngModel"
                                        (change)="cargarCantonesEmisor(datosXML.emisor_provincia)"
                                        [disabled]="emisorDeshabilitado" [(ngModel)]="datosXML.emisor_provincia"
                                        required aria-label="Provincia del emisor" aria-describedby="pendiente">
                                        <option [value]="provincia.codigo_provincia"
                                            *ngFor="let provincia Of provincias; ">{{provincia.nombre_provincia}}
                                        </option>
                                    </select>
                                </div>
                                <div class="form-item col-md-4">
                                    <label for="CantonEmisor">Cantón</label>
                                    <select ng-init="datosXML.emisor_canton" class="form-control" id="CantonEmisor"
                                        name="cantonEmisor" #cantonEmisor="ngModel"
                                        (change)="cargarDistritosEmisor(datosXML.emisor_canton)"
                                        [disabled]="emisorDeshabilitado" [(ngModel)]="datosXML.emisor_canton" required
                                        aria-label="Canton del emisor" aria-describedby="pendiente">
                                        <option [value]="canton.codigo_canton"
                                            *ngFor="let canton Of cantonesFiltradosEmisor;">{{canton.nombre_canton}}
                                        </option>
                                    </select>
                                </div>
                                <div class="form-item col-md-4">
                                    <label for="DistritoEmisor">Distrito</label>
                                    <select ng-init="datosXML.emisor_distrito" class="form-control" id="DistritoEmisor"
                                        name="distritoEmisor" #distritoEmisor="ngModel" [disabled]="emisorDeshabilitado"
                                        [(ngModel)]="datosXML.emisor_distrito" aria-label="Distrito del emisor"
                                        aria-describedby="pendiente">
                                        <option [value]="distrito.codigo_distrito"
                                            *ngFor="let distrito Of distritosFiltradosEmisor;">
                                            {{distrito.nombre_distrito}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-item col-md-4">
                                    <label for="BarrioEmisor">Barrio</label>
                                    <input type="text" class="form-control" id="BarrioEmisor" name="barrioEmisor"
                                        #barrioEmisor="ngModel" [disabled]="emisorDeshabilitado"
                                        [(ngModel)]="datosXML.emisor_barrio" aria-label="Barrio del emisor"
                                        aria-describedby="pendiente">
                                </div>
                                <div class="form-item col-md-8">
                                    <label for="OtrasSenasEmisor">Otras señas</label>
                                    <input type="text" class="form-control" id="OtrasSenasEmisor"
                                        name="otrasSenasEmisor" #otrasSenasEmisor="ngModel"
                                        [attr.disabled]="emisorDeshabilitado ? true:null"
                                        [(ngModel)]="datosXML.emisor_otras_senas" aria-label="Otras señas del emisor"
                                        aria-describedby="pendiente" required pattern="[a-zA-Z0-9 ]+" />
                                    <span class="text-danger"
                                        *ngIf="otrasSenasEmisor.touched && !otrasSenasEmisor.valid">
                                        <span>Dato inválido.</span>
                                    </span>
                                </div>
                            </div>
                            <p *ngIf="emisorGuardado" class="text-success">Cambios guardados.</p>
                            <div class="row justify-content-end" *ngIf="emisorDeshabilitado">
                                <div class="form-item col-auto">
                                    <button type="button" (click)="modificarEmisor()" class="btn btn-outline-secondary"
                                        aria-label="Botón modificar datos de emisor" aria-describedby="pendiente">
                                        MODIFICAR
                                    </button>
                                </div>
                            </div>
                            <div class="row justify-content-end" *ngIf="!emisorDeshabilitado">
                                <div class="form-item col-auto">
                                    <button type="button" (click)="guardarEmisor()" class="btn btn-outline-secondary"
                                        aria-label="Botón guardar datos de emisor" aria-describedby="pendiente">
                                        GUARDAR
                                    </button>
                                    <button type="button" (click)="cancelarEmisor()"
                                        class="btn btn-outline-secondary ml-3"
                                        aria-label="Botón cancelar modificación de datos de emisor"
                                        aria-describedby="pendiente">
                                        CANCELAR
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <br>

    <!------------------------------->
    <!------Datos del receptor------->
    <!------------------------------->
    <div class="header-title" aria-label="Sección de datos del receptor de factura" aria-describedby="pendiente">
        <div class="divider">
            <h5>Datos del receptor</h5>
        </div>
    </div>

    <div class="container card p-3 mb-3">
        <div class="row">
            <div class="col-md-6 py-3 form-item">
                <p class="d-inline pr-3">Tipo de cliente: </p>
                <div class="custom-control custom-radio d-inline-block px-4">
                    <input class="pl-3" type="radio" id="receptorRegistrado" name="prueba" [(ngModel)]="radioCliente"
                        class="custom-control-input" [value]="0" (click)="seleccionarTipoCliente(true)"
                        aria-label="Seleccionar cliente registrado" aria-describedby="pendiente">
                    <label class="custom-control-label" for="receptorRegistrado">Registrado</label>
                </div>
                <div class="custom-control custom-radio d-inline-block px-4">
                    <input class="pl-3" type="radio" id="receptorNuevo" name="prueba" [(ngModel)]="radioCliente"
                        class="custom-control-input" [value]="1" (click)="seleccionarTipoCliente(false)"
                        aria-label="Seleccionar cliente nuevo" aria-describedby="pendiente">
                    <label class="custom-control-label" for="receptorNuevo">Nuevo</label>
                </div>
            </div>
        </div>
        <div class="row" *ngIf="clienteRegistrado">

            <div class="col-md-12 form-item">
                <input id="buscarReceptor" class="form-control searchBar" (keyup)="applyFilter($event)"
                    placeholder="Buscar cliente" #input aria-label="Buscar cliente receptor"
                    aria-describedby="pendiente">
            </div>

            <div class="container ">


                <table id="pruebaTabla" mat-table [dataSource]="dataSource" class="mat-elevation-z8 tablaMat"
                    aria-label="Tabla de clientes registrados" aria-describedby="pendiente">

                    <!-- Position Column -->

                    <!-- Name Column -->
                    <ng-container matColumnDef="busquedaNombreCliente">
                        <th class="header" mat-header-cell *matHeaderCellDef aria-label="Encabezado Nombre"
                            aria-describedby="pendiente"> Nombre </th>
                        <td mat-cell *matCellDef="let element" aria-label="Nombre" aria-describedby="pendiente">
                            {{element.nombre}} </td>
                    </ng-container>

                    <!-- Weight Column -->
                    <ng-container matColumnDef="busquedaIdentificacionCliente">
                        <th class="header" mat-header-cell *matHeaderCellDef aria-label="Encabezado Identidicación"
                            aria-describedby="pendiente"> Identificación </th>
                        <td mat-cell *matCellDef="let element" aria-label="Identificación" aria-describedby="pendiente">
                            {{element.identificacion}} </td>
                    </ng-container>

                    <!-- Symbol Column -->
                    <ng-container matColumnDef="busquedaCorreoCliente">
                        <th class="header" mat-header-cell *matHeaderCellDef aria-label="Encabezado Correo"
                            aria-describedby="pendiente"> Correo electrónico </th>
                        <td mat-cell *matCellDef="let element" aria-label="Correo" aria-describedby="pendiente">
                            {{element.correo}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

                    <!-- <mat-row  *matRowDef="let row; columns: displayedColumns;" (click)="getRecord(row)"></mat-row> -->
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="getRecord(row)"></tr>

                    <!-- Row shown when there is no matching data. -->
                    <tr class="header" class="mat-row" *matNoDataRow>
                        <td class="mat-cell" colspan="4" aria-label="Sin resultados" aria-describedby="pendiente">No
                            data matching the filter "{{input.value}}"</td>
                    </tr>

                </table>
                <mat-paginator #clientesPaginator class="searchBar" [pageSizeOptions]="[5, 10, 20]"
                    showFirstLastButtons></mat-paginator>
            </div>
        </div>
        <div class="row">
            <div class="container searchBar">
                <div class="row">
                    <div class="form-item col-md-8">
                        <label for="NombreReceptor">Nombre o Razon Social del cliente</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="NombreReceptor" name="nombreReceptor"
                                #nombreReceptor="ngModel" [(ngModel)]="datosXML.receptor_nombre"
                                [attr.disabled]="receptorDatosImportantes ? true: null"
                                aria-label="Nombre del receptor con boton para mostrar información"
                                aria-describedby="pendiente" required />
                            <span class="text-danger" *ngIf="nombreReceptor.touched && !nombreReceptor.valid">
                                <span>Dato inválido.</span>
                            </span>
                            <div class="input-group-append" *ngIf="clienteSeleccionado">
                                <!--AQUI HAY ALGO RARISIMO x2 - TIPORECEPTOR AL REVES-->
                                <button type="button" class="btn btn-outline-secondary" (click)="toggleReceptor()">
                                    VER DATOS
                                </button>
                            </div>
                        </div>

                        <!-- <label for="NombreReceptor">Nombre o Razon Social</label>
                            <input type="text" class="form-control" id="NombreReceptor" name="nombreReceptor" [disabled]="receptorDatosImportantes"  [(ngModel)]="datosXML.receptor_nombre" aria-label="Nombre del receptor" aria-describedby="pendiente" /> -->
                    </div>

                </div>
                <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsedReceptorData"
                    *ngIf="!(clienteRegistrado) || clienteSeleccionado">
                    <div class="row">
                        <div class="form-item col-md-4">
                            <label for="NombreComercialReceptor">Nombre Comercial</label>
                            <input type="text" class="form-control" id="NombreComercialReceptor"
                                name="nombreComercialReceptor" #nombreComercialReceptor="ngModel"
                                [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_nombre" aria-label="Nombre Comercial del receptor"
                                aria-describedby="pendiente" required />
                            <span class="text-danger"
                                *ngIf="nombreComercialReceptor.touched && !nombreComercialReceptor.valid">
                                <span>Dato inválido.</span>
                            </span>
                        </div>
                        <div class="form-item col-md-4">
                            <label for="TipoIdentificacionReceptor">Tipo de Identificación</label>
                            <select class="form-control" id="TipoIdentificacionReceptor" #tipoIdentificacionReceptor = "ngModel"
                                name="tipoIdentificacionReceptor" [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_tipo_identif"
                                aria-label="Tipo de identificacion del receptor" aria-describedby="pendiente" required>
                                <option [value]="id.IDTipoIdentificacion" *ngFor="let id Of tipoIdentificaciones"
                                    [attr.selected]="id.IDTipoIdentificacion.toString() == datosXML.receptor_tipo_identif.toString() ? true: null">
                                    {{id.descripcion}}</option>
                            </select>
                        </div>
                        <div class="form-item col-md-4">
                            <label for="IdentificacionReceptor">Identificación</label>
                            <input type="number" class="form-control" id="IdentificacionReceptor"
                                name="identificacionReceptor" #identificacionReceptor="ngModel"
                                [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_num_identif" aria-label="Identificación del receptor"
                                aria-describedby="pendiente" required />
                            <span class="text-danger"
                                *ngIf="identificacionReceptor.touched && !identificacionReceptor.valid">
                                <span>Dato inválido.</span>
                            </span>
                        </div>

                    </div>
                    <div class="row">
                        <div class="form-item col-md-4">
                            <label for="CorreoReceptor">Correo electrónico</label>
                            <input type="email" class="form-control" id="CorreoReceptor" name="correoReceptor"
                                #correoReceptor="ngModel" [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_email" aria-label="Correo electrónico del receptor"
                                aria-describedby="pendiente" required pattern="[\w-\.]+@([\w-]+\.)+[\w-]{2,4}" />
                            <span class="text-danger" *ngIf="correoReceptor.touched && !correoReceptor.valid">
                                <span>Dato inválido.</span>
                            </span>
                        </div>
                        <div class="form-item col-md-4">
                            <label for="TelefonoReceptor">Teléfono</label>
                            <input type="text" class="form-control" id="TelefonoReceptor" name="telefonoReceptor"
                                #telefonoReceptor="ngModel" [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_tel" aria-label="Teléfono del receptor"
                                aria-describedby="pendiente" required pattern="[0-9]{8}" />
                            <span class="text-danger" *ngIf="telefonoReceptor.touched && !telefonoReceptor.valid">
                                <span>Dato inválido.</span>
                            </span>
                        </div>
                        <div class="form-item col-md-4">
                            <label for="FaxReceptor">Fax</label>
                            <input type="text" class="form-control" id="FaxReceptor" name="faxReceptor"
                                #faxReceptor="ngModel" [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_fax" aria-label="Fax del receptor"
                                aria-describedby="pendiente" required pattern="[0-9]{8}" />
                            <span class="text-danger" *ngIf="faxReceptor.touched && !faxReceptor.valid">
                                <span>Dato inválido.</span>
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-item col-md-4">
                            <label for="ProvinciaReceptor">Provincia</label>
                            <select ng-init="datosXML.receptor_provincia" class="form-control" id="ProvinciaReceptor"
                                name="provinciaReceptor" #provinciaReceptor="ngModel"
                                (change)="cargarCantones(datosXML.receptor_provincia)"
                                [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_provincia" aria-label="Provincia del receptor"
                                aria-describedby="pendiente" required>
                                <option [value]="provincia.codigo_provincia" *ngFor="let provincia Of provincias;">
                                    {{provincia.nombre_provincia}}</option>
                            </select>
                        </div>
                        <div class="form-item col-md-4">
                            <label for="CantonReceptor">Cantón</label>
                            <select ng-init="datosXML.receptor_canton" class="form-control" id="CantonReceptor"
                                name="cantonReceptor" #cantonReceptor="ngModel"
                                (change)="cargarDistritos(datosXML.receptor_canton)"
                                [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_canton" aria-label="Canton del receptor"
                                aria-describedby="pendiente" required>
                                <option [value]="canton.codigo_canton"
                                    *ngFor="let canton Of cantonesFiltradosReceptor;">{{canton.nombre_canton}}</option>
                            </select>
                        </div>
                        <div class="form-item col-md-4">
                            <label for="DistritoReceptor">Distrito</label>
                            <select ng-init="datosXML.receptor_distrito" class="form-control" id="DistritoReceptor"
                                name="distritoReceptor" #distritoReceptor="ngModel"
                                [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_distrito" aria-label="Distrito del receptor"
                                aria-describedby="pendiente" required>
                                <option [value]="distrito.codigo_distrito"
                                    *ngFor="let distrito Of distritosFiltradosReceptor;">{{distrito.nombre_distrito}}
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-item col-md-4">
                            <label for="BarrioReceptor">Barrio</label>
                            <input type="text" class="form-control" id="BarrioReceptor" name="barrioReceptor"
                                #barrioReceptor="ngModel" [attr.disabled]="receptorDeshabilitado  ? true: null"
                                [(ngModel)]="datosXML.receptor_barrio" aria-label="Barrio del receptor"
                                aria-describedby="pendiente" required>
                        </div>
                        <div class="form-item col-md-8">
                            <label for="OtrasSenasReceptor">Otras señas</label>
                            <input type="text" class="form-control" id="OtrasSenasReceptor" name="otrasSenasReceptor"
                                [(ngModel)]="otras_senas_receptor" [attr.disabled]="receptorDeshabilitado  ? true: null"
                                aria-label="Otras señas del receptor" aria-describedby="pendiente" />
                        </div>
                    </div>
                    <p *ngIf="receptorActualizado" class="text-success">Datos actualizados correctamente.</p>
                    <p *ngIf="receptorInsertado" class="text-success">Receptor agregado correctamente.</p>
                    <p *ngIf="registradoAntes" class="text-success">Persona registrada anteriormente.</p>
                    <div class="row justify-content-end" *ngIf="!clienteSeleccionado">
                        <div class="form-item col-auto">
                            <button type="button"
                                [disabled]="!barrioReceptor.valid || !faxReceptor.valid || !telefonoReceptor.valid || !nombreComercialReceptor.valid || !nombreReceptor.valid || !identificacionReceptor.valid || !correoReceptor.valid || !cantonReceptor.valid || !distritoReceptor.valid || !tipoIdentificacionReceptor.valid"
                                (click)="guardarReceptor()" class="btn btn-outline-secondary"
                                aria-label="Botón guardar nuevo receptor" aria-describedby="pendiente">
                                AGREGAR
                            </button>
                        </div>
                    </div>
                    <div *ngIf="clienteSeleccionado">
                        <div class="row justify-content-end" *ngIf="receptorDeshabilitado">
                            <div class="form-item col-auto">
                                <button type="button" (click)="modificarReceptor()" class="btn btn-outline-secondary"
                                    aria-label="Botón modificar datos de receptor" aria-describedby="pendiente">
                                    MODIFICAR
                                </button>
                            </div>
                        </div>
                        <div class="row justify-content-end" *ngIf="!receptorDeshabilitado">
                            <div class="form-item col-auto">
                                <button type="button" (click)="actualizarReceptor()" class="btn btn-outline-secondary"
                                    aria-label="Botón guardar cambios de datos de receptor"
                                    aria-describedby="pendiente">
                                    GUARDAR
                                </button>
                                <button type="button" (click)="cancelarReceptor()"
                                    class="btn btn-outline-secondary ml-3"
                                    aria-label="Botón cancelar modificacion de datos de receptor"
                                    aria-describedby="pendiente">
                                    CANCELAR
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <!--Datos de pago del receptor--->
    <div class="container card p-3">
        <div class="row">
            <div class="col-md-4 form-item">
                <label for="metodos">Método de pago</label>
                <select class="form-control" name="metodos" id="metodos" [(ngModel)]="datosXML.medio_pago"
                    aria-label="Método de pago del receptor" aria-describedby="pendiente" required>
                    <option value="01" selected>Efectivo</option>
                    <option value="02">Tarjeta</option>
                    <option value="03">Cheque</option>
                    <option value="04">Transferencia - depósito bancario</option>
                    <option value="05">Recaudado por terceros</option>
                    <option value="99">Otros</option>
                </select>
            </div>
            <div class="col-md-4 form-item">
                <label for="condiciones">Condición de venta</label>
                <select class="form-control mb-3" name="condiciones" id="condiciones"
                    [(ngModel)]="datosXML.condicion_venta" aria-label="Condición de venta del receptor"
                    aria-describedby="pendiente" required>
                    <option value="01" selected>Contado</option>
                    <option value="02">Crédito</option>
                    <option value="03">Consignación</option>
                    <option value="04">Apartado</option>
                    <option value="05">Arrendamiento con opción de compra</option>
                    <option value="06">Arrendamiento con función financiera</option>
                    <option value="07">Cobro a favor de un tercero</option>
                    <option value="08">Servicios prestados al Estado a crédito</option>
                    <option value="09">Pago de servicios prestados al Estado</option>
                    <option value="99">Otros</option>
                </select>
            </div>
            <div class="col-md-4 form-item">
                <div class="form-group mb-0" *ngIf="datosXML.condicion_venta === '02'">
                    <label for="plazo">Plazo del crédito:</label>
                    <input type="text" class="form-control" id="plazo" placeholder="" name="plazo" #plazo="ngModel"
                        [(ngModel)]="datosXML.plazo_credito" aria-label="Plazo del crédito del receptor"
                        aria-describedby="pendiente" required pattern="[0-9]+" />
                    <span class="text-danger" *ngIf="plazo.touched && !plazo.valid">
                        <span>Dato inválido.</span>
                    </span>
                </div>
            </div>
        </div>
        <div class="row" *ngIf="datosXML.condicion_venta === '99' || datosXML.medio_pago === '99'">
            <div class="col-md-4 form-item">
                <div class="form-group mb-0" *ngIf="datosXML.medio_pago === '99'">
                    <label for="detalleCondicion">Detalle método pago:</label>
                    <input type="text" class="form-control" id="detalleCondicion" placeholder="" name="detalleCondicion"
                        aria-label="Detalle método pago del receptor" aria-describedby="pendiente">
                </div>
            </div>
            <div class="col-md-4 form-item">
                <div class="form-group " *ngIf="datosXML.condicion_venta === '99'">
                    <label for="detalleVenta">Detalle condición de venta:</label>
                    <input type="text" class="form-control" id="detalleVenta" placeholder="" name="detalleVenta"
                        aria-label="Detalle condición de venta del receptor" aria-describedby="pendiente">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 py-3 form-item">
                <p class="d-inline pr-3">Tipo de moneda: </p>
                <div class="custom-control custom-radio d-inline-block px-4">
                    <input class="pl-3" type="radio" id="colones" name="moneda" [(ngModel)]="datosXML.cod_moneda"
                        class="custom-control-input" value="CRC" aria-label="Seleccionar colones como tipo de moneda"
                        aria-describedby="pendiente">
                    <label class="custom-control-label" for="colones">Colones</label>
                </div>
                <div class="custom-control custom-radio d-inline-block px-4">
                    <input class="pl-3" type="radio" id="dolares" name="moneda" [(ngModel)]="datosXML.cod_moneda"
                        class="custom-control-input" value="USD" aria-label="Seleccionar dolares como tipo de moneda"
                        aria-describedby="pendiente">
                    <label class="custom-control-label" for="dolares">Dólares</label>
                </div>
            </div>
            <div class="col-md-4  form-item" *ngIf="datosXML.cod_moneda === 'USD'">
                <div class="form-group mb-0">
                    <label for="plazo">Tipo de cambio:</label>
                    <input type="text" class="form-control" id="cambio" placeholder="" name="cambio"
                        [(ngModel)]="datosXML.tipo_cambio" aria-label="Tipo de cambio de dolar"
                        aria-describedby="pendiente" readonly>
                </div>
            </div>
            <div class="col-md-4  form-item" *ngIf="datosXML.cod_moneda === 'USD'">
                <label for="picker">Fecha:</label><br>
                <mat-form-field class="" color="#7E57C2" appearance="fill">
                    <mat-label></mat-label>
                    <input matInput [matDatepicker]="picker" (dateChange)="cambioFecha($event)" [max]="maxDate" disabled
                        aria-label="Seleccionar fecha de tipo de cambio" aria-describedby="pendiente">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker disabled="false"></mat-datepicker>
                </mat-form-field>
            </div>
        </div>
    </div>

    <br>
    <div class="header-title" aria-label="Sección de líneas de detalle de factura" aria-describedby="pendiente">
        <div class="divider">
            <h5>Lineas de detalle</h5>
        </div>
    </div>

    <div class="card p-3 w-95 m-auto">
        <div class="table-responsive">
            <table class="table table-striped table-hover" aria-label="Tabla de lineas de detalle"
                aria-describedby="pendiente">
                <thead class="header">
                    <tr class="text-center">
                        <th scope="col" class="" aria-label="Encabezado Producto en lineas de detalle"
                            aria-describedby="pendiente">Producto</th>
                        <th scope="col" aria-label="Encabezado Cantidad de producto en lineas de detalle"
                            aria-describedby="pendiente">Cantidad</th>
                        <th scope="col" class="mediano" aria-label="Encabezado Tipo de producto en lineas de detalle"
                            aria-describedby="pendiente">Tipo</th>
                        <th scope="col" aria-label="Encabezado Precio unitario de producto en lineas de detalle"
                            aria-describedby="pendiente">Precio Unitario</th>
                        <th scope="col" aria-label="Encabezado Descuento de producto en lineas de detalle"
                            aria-describedby="pendiente">Descuento</th>
                        <th scope="col" class="" aria-label="Encabezado Razón de descuento en lineas de detalle"
                            aria-describedby="pendiente">Razón</th>
                        <th scope="col" class="" aria-label="Encabezado Impuestos de producto en lineas de detalle"
                            aria-describedby="pendiente">Impuestos</th>
                        <th scope="col" class="px-2" aria-label="Encabezado Base de producto en lineas de detalle"
                            aria-describedby="pendiente">Base</th>
                        <th scope="col" class="px-2" aria-label="Encabezado Tarifa de producto en lineas de detalle"
                            aria-describedby="pendiente">Tarifa</th>
                        <th scope="col" class="px-3" aria-label="Encabezado Subtotal de producto en lineas de detalle"
                            aria-describedby="pendiente">Subtotal</th>
                        <th scope="col" class="px-3" aria-label="Encabezado Total de producto en lineas de detalle"
                            aria-describedby="pendiente">Total</th>
                        <th scope="col" class="px-3" aria-label="Encabezado Accion borrar linea de detalle"
                            aria-describedby="pendiente">Acción</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let linea of lineas; let i = index">
                        <th scope="row">
                            <input type="text" #cabys="ngModel" [(ngModel)]="linea.producto" [name]="'cabys'+i"
                                class="form-control has-search" placeholder="Buscar"
                                (ngModelChange)="filtroCabys($event, linea)" [matAutocomplete]="auto" required
                                aria-label="Buscar producto para agregar a linea de detalle"
                                aria-describedby="pendiente" />
                            <span class="text-danger" *ngIf="!cabys.valid">
                                <span class="font-weight-normal">Dato inválido.</span>
                            </span>

                            <mat-autocomplete [panelWidth]="800" #auto="matAutocomplete">
                                <mat-option *ngFor="let cabys of linea.filtro" [value]="cabys.descripcion"
                                    (click)="setCabys(linea, cabys);">
                                    {{cabys.descripcion}}
                                </mat-option>
                            </mat-autocomplete>
                        </th>
                        <td><input type="number" min="1" class="form-control" (change)="calcularTotalesLinea(linea)"
                                [(ngModel)]="linea.cantidad" placeholder="1" [ngModelOptions]="{standalone: true}"
                                required></td>
                        <td><select class="form-control custom-select" [(ngModel)]="linea.tipo"
                                [ngModelOptions]="{standalone: true}" (change)="calcularTotalesLinea(linea)"
                                aria-label="Tipo de producto en linea de detalle" aria-describedby="pendiente">
                                <option value="Al">Alquiler de uso habitacional</option>
                                <option value="Alc">Alquiler de uso comercial</option>
                                <option value="Cm">Comisiones</option>
                                <option value="g">Gramo</option>
                                <option value="I">Intereses</option>
                                <option value="Kg">Kilogramo</option>
                                <option value="L">Litro</option>
                                <option value="m">Metro</option>
                                <option value="m2">Metro cuadrado</option>
                                <option value="mL">Mililitro</option>
                                <option value="mm">Milímetro</option>
                                <option value="Oz">Onzas</option>
                                <option value="ln">Pulgada</option>
                                <option value="Sp" selected>Servicios Profesionales</option>
                                <option value="St">Servicios técnicos</option>
                                <option value="t">Tonelada</option>
                                <option value="Unid">Unidad</option>
                                <option value="W">Watt</option>
                                <option value="Os">Otro tipo de servicio</option>
                                <option value="Otros">Otros</option>
                            </select></td>
                        <td><input type="number" min="5" class="form-control" (change)="calcularTotalesLinea(linea)"
                                placeholder="1" [(ngModel)]="linea.precioUnitario" [ngModelOptions]="{standalone: true}"
                                aria-label="Precio unitario de producto en linea de detalle"
                                aria-describedby="pendiente"></td>
                        <td>
                            <div class="input-group">
                                <input type="number" min="0" class="form-control w-50" placeholder="1"
                                    (change)="calcularTotalesLinea(linea)" [(ngModel)]="linea.descuento"
                                    [ngModelOptions]="{standalone: true}" required
                                    aria-label="Descuento de producto en linea de detalle" aria-describedby="pendiente">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                [attr.id]="'porcentaje' + i" [checked]="linea.porcentaje"
                                                (change)=" linea.porcentaje = !linea.porcentaje; calcularTotalesLinea(linea);"
                                                aria-label="Checkbox para descuento en porcentaje"
                                                aria-describedby="pendiente">
                                            <label class="custom-control-label" [attr.for]="'porcentaje' + i">%</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>


                        <td><input *ngIf="linea.descuento > 0" type="text" class="form-control"
                                [(ngModel)]="linea.razon" [ngModelOptions]="{standalone: true}"
                                aria-label="Razón de descuento en producto en linea de detalle"
                                aria-describedby="pendiente"></td>
                        <td><select class="form-control custom-select" (change)="actualizarTarifaLinea(linea);"
                                [(ngModel)]="linea.impuesto" [ngModelOptions]="{standalone: true}" required
                                aria-label="Impuesto de producto en linea de detalle" aria-describedby="pendiente">
                                <option value="01-01">IVA exento</option>
                                <option value="01-02">IVA reducido 1%</option>
                                <option value="01-03">IVA reducido 2%</option>
                                <option value="01-04">IVA reducido 4%</option>
                                <option value="01-05">IVA transitorio 0%</option>
                                <option value="01-06">IVA transitorio 2%</option>
                                <option value="01-07">IVA transitorio 4%</option>
                                <option value="01-08" selected>IVA 13%</option>
                                <option value="07-02">IVA reducido 1% especial</option>
                                <option value="07-03">IVA reducido 2% especial</option>
                                <option value="07-04">IVA reducido 4% especial</option>
                                <option value="07-05">IVA transitorio 0% especial</option>
                                <option value="07-06">IVA transitorio 2% especial</option>
                                <option value="07-07">IVA transitorio 4% especial</option>
                                <option value="07-08">IVA 13% especial</option>
                                <option value="08">IVA Régimen de Bienes Usados (Factor)</option>
                            </select></td>
                        <td><input *ngIf="linea.impuesto.slice(0,2) === '07'" (change)="calcularTotalesLinea(linea)"
                                min="1" type="number" class="form-control" placeholder="1" [(ngModel)]="linea.base"
                                [ngModelOptions]="{standalone: true}"
                                aria-label="Base imponible de impuesto en linea de detalle"
                                aria-describedby="pendiente"></td>
                        <td><input *ngIf="linea.impuesto === '08'" (ngModelChange)="calcularTotalesLinea(linea)" min="1"
                                type="number" class="form-control" placeholder="1.13" [(ngModel)]="linea.tarifa"
                                [ngModelOptions]="{standalone: true}"
                                aria-label="Tarifa de impuesto en linea de detalle" aria-describedby="pendiente"></td>
                        <td class="pt-3 text-center" (change)="calcularTotales()"
                            aria-label="Subtotal de linea de detalle" aria-describedby="pendiente">₡{{linea.subtotal |
                            number : '1.2-2' }}
                        </td>
                        <td class="pt-3 text-center" (change)="calcularTotales()" aria-label="Total de linea de detalle"
                            aria-describedby="pendiente">₡{{linea.total | number : '1.2-2' }}
                        </td>
                        <td><button *ngIf="i>0" type="button" class="btn" (click)="borrarLinea(i);"
                                aria-label="Boton para eliminar linea de detalle" aria-describedby="pendiente"><i
                                    class="fa fa-trash"></i></button></td>
                    </tr>
                </tbody>
            </table>

        </div>
        <button type="button" class="btn btn-outline-secondary m-auto" (click)="nuevaLinea();"
            aria-label="Boton para agregar nueva linea de detalle" aria-describedby="pendiente">
            AGREGAR
        </button>
    </div>
    <br>
    <div class="header-title" aria-label="Sección de otros cargos de factura" aria-describedby="pendiente">
        <div class="divider">
            <h5>Otros cargos</h5>
        </div>
    </div>

    <div class="card p-3 w-95 m-auto">
        <div class="table-responsive">
            <table class="table table-striped table-hover" aria-label="Tabla de otros cargos"
                aria-describedby="pendiente">
                <thead class="header">
                    <tr class="text-center">
                        <th scope="col" class="grande" aria-label="Encabezado Tipo de documento de otros cargos"
                            aria-describedby="pendiente">Tipo de documento</th>
                        <th scope="col" aria-label="Encabezado Detalle de otros cargos" aria-describedby="pendiente">
                            Detalle</th>
                        <th scope="col" class="mediano" aria-label="Encabezado Porcentaje de otros cargos"
                            aria-describedby="pendiente">Porcentaje</th>
                        <th scope="col" aria-label="Encabezado Tipo de identificación de otros cargos"
                            aria-describedby="pendiente">Tipo de identificación</th>
                        <th scope="col" aria-label="Encabezado Identificación de otros cargos"
                            aria-describedby="pendiente">Identificación</th>
                        <th scope="col" aria-label="Encabezado Nombre de otros cargos" aria-describedby="pendiente">
                            Nombre</th>
                        <th scope="col" class="mediano" aria-label="Encabezado Monto de otros cargos"
                            aria-describedby="pendiente">Monto</th>
                        <th scope="col" class="px-3" aria-label="Encabezado Acción borrar otro cargo"
                            aria-describedby="pendiente">Acción</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let cargo of otrosCargos; let i = index">
                        <th scope="row"><select class="form-control custom-select" [(ngModel)]="cargo.tipoDocumento"
                                [ngModelOptions]="{standalone: true}" (change)="setMontoCargo(cargo)"
                                aria-label="Tipo de documento de otro cargo" aria-describedby="pendiente">
                                <option value="04">Cobro de un tercero</option>
                                <option value="06">Impuesto de servicio 10%</option>
                                <option value="99">Otros cargos</option>
                            </select></th>
                        <td><input type="text" class="form-control" #detalleCargo="ngModel" [(ngModel)]="cargo.detalle"
                                placeholder="" [name]="'detalleCargo'+i" required aria-label="Detalle de otro cargo"
                                aria-describedby="pendiente">
                            <span class="text-danger" *ngIf="!detalleCargo.valid">
                                <span>Dato inválido.</span>
                            </span>
                        </td>
                        <td>
                            <div class="input-group">
                                <input type="number" min="1" class="form-control w-25" placeholder="1"
                                    (change)="calcularTotales()" [(ngModel)]="cargo.monto"
                                    [ngModelOptions]="{standalone: true}" required aria-label="Monto de otro cargo"
                                    aria-describedby="pendiente">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        <div class="custom-control custom-checkbox">

                                            <input type="checkbox" class="custom-control-input"
                                                [attr.id]="'porcentajeCargo' + i" [checked]="cargo.porcentaje"
                                                (change)="cargo.porcentaje = !cargo.porcentaje; calcularTotales()"
                                                aria-label="Checkbox para monto en porcentaje de otro cargo"
                                                aria-describedby="pendiente">
                                            <label class="custom-control-label"
                                                [attr.for]="'porcentajeCargo' + i">%</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td *ngIf="cargo.tipoDocumento === '04'"><select class="form-control custom-select"
                                [(ngModel)]="cargo.tipoIdentificacion" [ngModelOptions]="{standalone: true}"
                                aria-label="Tipo de identificación de otro cargo" aria-describedby="pendiente">
                                <option value="01">Cédula Física</option>
                                <option value="02">Cédula Jurídica</option>
                                <option value=03>Pasaporte</option>
                                <option value=04>Dimex</option>
                                <option value=05>DIDI</option>
                                <option value=06>NITE</option>
                            </select></td>
                        <td *ngIf="cargo.tipoDocumento === '04'"><input type="text" class="form-control"
                                [(ngModel)]="cargo.identificacion" placeholder="1" [ngModelOptions]="{standalone: true}"
                                aria-label="Identificación de otro cargo" aria-describedby="pendiente"></td>
                        <td *ngIf="cargo.tipoDocumento === '04'"><input type="text" class="form-control"
                                [(ngModel)]="cargo.nombre" placeholder="1" [ngModelOptions]="{standalone: true}"
                                aria-label="Nombre de tercero de otro cargo" aria-describedby="pendiente"></td>
                        <td *ngIf="cargo.tipoDocumento != '04'"><input type="text" class="form-control invisible"></td>
                        <td *ngIf="cargo.tipoDocumento != '04'"><input type="text" class="form-control invisible"></td>
                        <td *ngIf="cargo.tipoDocumento != '04'"><input type="text" class="form-control invisible"></td>
                        <td class="pt-3 text-center" (change)="calcularTotales()" aria-label="Monto total de otro cargo"
                            aria-describedby="pendiente">₡{{cargo.total | number : '1.2-2' }}
                        </td>
                        <td><button type="button" (click)="borrarCargo(i);" class="btn"
                                aria-label="Boton para eliminar otro cargo" aria-describedby="pendiente"><i
                                    class="fa fa-trash"></i></button></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <button type="button" class="btn btn-outline-secondary m-auto" (click)="nuevoCargo();"
            aria-label="Boton para agregar un cargo nuevo" aria-describedby="pendiente">
            AGREGAR
        </button>
    </div>

    <br>
    <div class="header-title" aria-label="Sección de resumen de factura" aria-describedby="pendiente">
        <div class="divider">
            <h5>Resumen</h5>
        </div>
    </div>

    <div class="container">
        <div class="card p-3">
            <table id="resumenTabla" mat-table [dataSource]="dataSourceResumen" class="mat-elevation-z8"
                aria-label="Tabla resumen de lineas de factura" aria-describedby="pendiente">

                <!-- Position Column -->

                <!-- Name Column -->
                <ng-container matColumnDef="productoLinea">
                    <th class="header" mat-header-cell *matHeaderCellDef aria-label="Encabezado Producto"
                        aria-describedby="pendiente"> Producto </th>
                    <td mat-cell *matCellDef="let element" aria-label="Producto" aria-describedby="pendiente">
                        {{element.producto}} </td>
                </ng-container>

                <!-- Weight Column -->
                <ng-container matColumnDef="cantidadProductoLinea">
                    <th class="header" mat-header-cell *matHeaderCellDef aria-label="Encabezado Cantidad"
                        aria-describedby="pendiente"> Cantidad </th>
                    <td mat-cell *matCellDef="let element" aria-label="Cantidad" aria-describedby="pendiente">
                        {{element.cantidad}} </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="totalLinea">
                    <th class="header" mat-header-cell *matHeaderCellDef aria-label="Encabezado Total"
                        aria-describedby="pendiente"> Total </th>
                    <td mat-cell *matCellDef="let element" aria-label="Total" aria-describedby="pendiente">
                        {{element.total | number : '1.2-2' }} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsResumen"></tr>

                <!-- <mat-row  *matRowDef="let row; columns: displayedColumns;" (click)="getRecord(row)"></mat-row> -->
                <tr mat-row *matRowDef="let row; columns: displayedColumnsResumen;" (click)="getRecord(row)"></tr>

                <!-- Row shown when there is no matching data. -->

            </table>
            <mat-paginator #resumenPaginator class="searchBar mt-2" [pageSizeOptions]="[5, 10, 20]"
                showFirstLastButtons></mat-paginator>
        </div>
    </div>

    <div class="container" id="tablaResumenFactura" aria-label="Resumen de totales de factura"
        aria-describedby="pendiente">
        <div class="card p-5 mt-3">
            <div class="row pb-2">
                <div class="col-md-6 text-left">
                    <h4>Subtotal</h4>
                </div>
                <div class="col-md-6 text-right">
                    <h5 aria-label="Subtotal" aria-describedby="pendiente">₡ {{datosXML.total_ventas | number : '1.2-2'
                        }}</h5>
                </div>
            </div>
            <div class="row pb-2">
                <div class="col-md-6 text-left">
                    <h4>Impuestos</h4>
                </div>
                <div class="col-md-6 text-right">
                    <h5 aria-label="Impuestos" aria-describedby="pendiente">₡ {{datosXML.total_impuestos | number :
                        '1.2-2' }}</h5>
                </div>
            </div>
            <div class="row pb-2">
                <div class="col-md-6 text-left">
                    <h4>Otros cargos</h4>
                </div>
                <div class="col-md-6 text-right">
                    <h5 aria-label="Otros cargos" aria-describedby="pendiente">₡{{total_OtrosCargos}}</h5>
                </div>
            </div>

            <div class="pb-3">
                <button type="button" class="btn btn-outline-secondary" (click)="toggleResumen()"
                    aria-label="Botón ver detalles de totales" aria-describedby="pendiente">
                    VER DETALLES
                </button>
            </div>

            <div>
                <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsedResumenData">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 text-left">
                                    <h6>Descripción</h6>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <h6>Monto</h6>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Mercadería gravada</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Mercadería gravada" aria-describedby="pendiente">
                                        ₡{{datosXML.total_merc_gravada | number : '1.2-2' }}</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row ">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Mercadería exenta</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Mercadería exenta" aria-describedby="pendiente">₡
                                        {{datosXML.total_merc_exenta | number : '1.2-2' }}</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row ">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Mercadería exonerada</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Mercadería exonerada" aria-describedby="pendiente">₡
                                        123456789</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row ">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Servicios gravados</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Servicios gravados" aria-describedby="pendiente">₡
                                        {{datosXML.total_serv_gravados | number : '1.2-2' }}</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row ">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Servicios exentos</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Servicios exentos" aria-describedby="pendiente">₡
                                        {{datosXML.total_serv_exentos | number : '1.2-2' }}</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row ">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Servicios exonerados</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Servicios exonerados" aria-describedby="pendiente">₡
                                        123456789</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row ">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Total gravado</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Total gravado" aria-describedby="pendiente">₡
                                        {{datosXML.total_gravados | number : '1.2-2' }}</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row ">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Total exento</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Total exento" aria-describedby="pendiente">₡
                                        {{datosXML.total_exentos | number : '1.2-2' }}</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row ">
                                <div class="col-md-6 text-left">
                                    <p class="mb-1">Total exonerado</p>
                                </div>
                                <div class="col-md-6 text-md-right">
                                    <p class="mb-1" aria-label="Total exonerado" aria-describedby="pendiente">₡
                                        123456789</p>
                                </div>
                            </div>
                            <hr class="m-0 p-1">
                            <div class="row pt-3">
                                <div class="col-md-3 text-md-right">
                                    <h6 class="mb-1">Descuento: </h6>
                                </div>
                                <div class="col-md-3 text-left">
                                    <p class="mb-1" aria-label="Descuento" aria-describedby="pendiente">₡
                                        {{datosXML.total_descuentos | number : '1.2-2' }}</p>
                                </div>
                                <div class="col-md-3 text-md-right">
                                    <h6 class="mb-1">Venta neta: </h6>
                                </div>
                                <div class="col-md-3 text-left">
                                    <p class="mb-1" aria-label="Venta neta" aria-describedby="pendiente">₡
                                        {{datosXML.total_ventas_neta | number : '1.2-2' }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row pt-4">
                <div class="col-md-6 text-left">
                    <h2>Total</h2>
                </div>
                <div class="col-md-6 text-right">
                    <h2 aria-label="Total general de la factura" aria-describedby="pendiente">₡
                        {{datosXML.total_comprobante | number : '1.2-2' }}</h2>
                </div>
            </div>
            <div class="row pt-4">
                <div class="col-md-12 text-center">
                    <button type="submit" class="btn btn-outline-secondary" (submit)="enviar(datosXML)"
                        aria-label="Botón enviar factura" aria-describedby="pendiente"
                        [disabled]="myForm.invalid || (!clienteSeleccionado || !clienteRegistrado)">
                        <h5>ENVIAR</h5>
                    </button>
                </div>
            </div>

        </div>
    </div>


</form>